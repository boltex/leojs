<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-users-guide/customizing" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Customizing Leo | LeoJS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://boltex.github.io/leojs/img/leojs-social-card.png"><meta data-rh="true" name="twitter:image" content="https://boltex.github.io/leojs/img/leojs-social-card.png"><meta data-rh="true" property="og:url" content="https://boltex.github.io/leojs/docs/users-guide/customizing"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Customizing Leo | LeoJS"><meta data-rh="true" name="description" content="This chapter discusses how to customize Leo using the plugins and other means. See Using settings for a description of how to change Leo&#x27;s settings."><meta data-rh="true" property="og:description" content="This chapter discusses how to customize Leo using the plugins and other means. See Using settings for a description of how to change Leo&#x27;s settings."><link data-rh="true" rel="icon" href="/leojs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://boltex.github.io/leojs/docs/users-guide/customizing"><link data-rh="true" rel="alternate" href="https://boltex.github.io/leojs/docs/users-guide/customizing" hreflang="en"><link data-rh="true" rel="alternate" href="https://boltex.github.io/leojs/docs/users-guide/customizing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3O12YAXPHG-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6YLK1QW8SS"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6YLK1QW8SS",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="LeoJS" href="/leojs/opensearch.xml"><link rel="stylesheet" href="/leojs/assets/css/styles.3244a7e1.css">
<script src="/leojs/assets/js/runtime~main.c664e2ae.js" defer="defer"></script>
<script src="/leojs/assets/js/main.3256827a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div> <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_CIJY"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/leojs/"><img src="/leojs/img/leoapp256px.png" alt="LeoJS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/leojs/img/leoapp256px.png" alt="LeoJS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>LeoJS</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/leojs/docs/users-guide/leomarkup">Leo’s Markup Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/leojs/docs/users-guide/customizing">Customizing Leo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/leojs/docs/users-guide/commands">Commands Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/leojs/docs/users-guide/directives">Directives Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/leojs/docs/users-guide/cheatsheet">Cheat Sheet</a></li></ul></nav></div></div></aside><div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button> <a class="navbar__item navbar__link" href="/leojs/docs/getting-started/introduction">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/leojs/docs/users-guide/leomarkup">User&#x27;s Guide</a><a class="navbar__item navbar__link" href="/leojs/docs/advanced-topics/scripting-guide">Advanced Topics</a><a class="navbar__item navbar__link" href="/leojs/docs/appendices/format-of-leo-files">Appendices</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/boltex/leojs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--github-link" aria-label="GitHub Repository" title="GitHub Repository"></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/leojs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Customizing Leo</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Customizing Leo</h1></header>
<p>This chapter discusses how to customize Leo using the plugins and other means. See <a href="#using-settings">Using settings</a> for a description of how to change Leo&#x27;s settings.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-settings">Using settings<a href="#using-settings" class="hash-link" aria-label="Direct link to Using settings" title="Direct link to Using settings">​</a></h2>
<p>Leo stores options in <strong>@settings trees</strong>, outlines whose headline is <code>@settings</code>. When opening a .leo file, Leo looks for <code>@settings</code> trees not only in the outline being opened but also in various <code>leoSettings.leo</code> files. This scheme allows for the following kinds of settings:</p>
<ul>
<li>Per-installation or per-machine settings.</li>
<li>Per-user settings.</li>
<li>Per-folder settings.</li>
<li>Per-file settings.</li>
</ul>
<p>There are two kinds of settings files:</p>
<ol>
<li>
<p><strong>Default settings files</strong>, named <strong>leoSettings.leo</strong>. Although they can be used in other ways, they typically contain default settings.</p>
</li>
<li>
<p><strong>Personal settings files</strong>, named <strong>myLeoSettings.leo</strong>. They provide a way of ensuring that your customized settings are not altered when updating Leo from git or while installing a new version of Leo. <code>myLeoSettings.leo</code> will never be part of any Leo distribution, and it will never exist in Leo&#x27;s repository. This solution is <em>much</em> better than trying to update <code>leoSettings.leo</code>.</p>
</li>
</ol>
<p>The following sections describe the kinds of nodes in <code>@settings</code> trees.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configuration-directories">Configuration directories<a href="#configuration-directories" class="hash-link" aria-label="Direct link to Configuration directories" title="Direct link to Configuration directories">​</a></h3>
<p>Settings files can be found in the following directories:</p>
<ul>
<li>
<p><strong>homeDir</strong>, the <code>HOME/.leo</code> directory. HOME is given by Python&#x27;s HOME environment variable, or by <code>g.os_path_expanduser(&#x27;~&#x27;)</code> if no HOME environment variable exists.</p>
</li>
<li>
<p><strong>configDir</strong>, Leo&#x27;s configuration directory: <code>leo/config</code>.</p>
</li>
<li>
<p><strong>machineDir</strong>, the <code>HOME/.leo/MACHINE</code> directory. MACHINE is given by Python&#x27;s <code>HOSTNAME</code> environment variable, or by Python&#x27;s <code>COMPUTERNAME</code> environment variable if there is no <code>HOSTNAME</code> variable, or by the value returned by <code>socket.gethostname()</code> if neither environment variable exists.</p>
</li>
<li>
<p><strong>localDir</strong>, the directory containing the .leo file being loaded.</p>
</li>
</ul>
<p>Leo reports in the Log pane window on startup and when opening .leo files what HOME dir is used and which settings files are read.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="search-order-for-settings-files">Search order for settings files<a href="#search-order-for-settings-files" class="hash-link" aria-label="Direct link to Search order for settings files" title="Direct link to Search order for settings files">​</a></h3>
<p>When reading a .leo file, Leo looks for settings in default settings files first, then settings in personal settings files, and finally settings in local settings files.  The exact search order is:</p>
<p><strong>First</strong>: Default settings files:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">configDir/leoSettings.leo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">homeDir/leoSettings.leo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDir/leoSettings.leo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Second</strong>: Personal settings files:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">configDir/myLeoSettings.leo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">homeDir/myLeoSettings.leo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">homeDir/&lt;machine-name&gt;LeoSettings.leo (note capitalization)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDir/myLeoSettings.leo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Last</strong>: Local settings files: the file being loaded.</p>
<p>Settings that appear later in this list override settings that appear earlier in this list.  This happens on a setting-by-setting basis, <em>not</em> on a file-by-file basis.  In other words, each individual setting overrides only the <em>corresponding</em> setting in previously-read files.  Reading a setting file does <em>not</em> reset all previous settings. Note that the same file might appear several times in the search list. Leo detects such duplicate file names and only loads each settings file once. Leo remembers all the settings in settings files and does not reread those settings when reading another .leo file.</p>
<p><strong>Caution</strong>: This search order offers almost too much flexibility. This can be confusing, even for power users. It&#x27;s important to choose the &quot;simplest configuration scheme that could possibly work&quot;.  Something like:</p>
<ul>
<li>Use a single <code>leoSettings.leo</code> file for installation-wide defaults.</li>
<li>Use a single <code>myLeoSettings.leo</code> files for personal defaults.</li>
<li>Use local settings sparingly.</li>
</ul>
<blockquote>
<p>📌 <strong>NOTE</strong><br>
<!-- -->it is good style to limit settings placed in <code>myLeoSettings.leo</code> to those settings that differ from default settings.</p>
</blockquote>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="safe-rules-for-local-settings">Safe rules for local settings<a href="#safe-rules-for-local-settings" class="hash-link" aria-label="Direct link to Safe rules for local settings" title="Direct link to Safe rules for local settings">​</a></h3>
<p>You should use special care when placing default or personal settings files in <strong>local</strong> directories, that is, directories other than homeDir, configDir or machineDir. In particular, the value of localDir can change when Leo reads additional files. This can result in Leo finding new default and personal settings files. The values of these newly-read settings files will, as always, override any previously-read settings.</p>
<p>Let us say that a setting is <strong>volatile</strong> if it is different from a default setting. Let us say that settings file A.leo <strong>covers</strong> settings file if B.leo if all volatile settings in B.leo occur in A.leo.</p>
<blockquote>
<p>💡 <strong>TIP</strong><br>
<!-- -->Settings files in local directories should
cover all other settings files.</p>
</blockquote>
<p>Following this rule will ensure that the per-directory defaults specified in the local settings file will take precedence over all previously-read default and personal settings files. Ignore this principle at your peril.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="organizer-nodes">Organizer nodes<a href="#organizer-nodes" class="hash-link" aria-label="Direct link to Organizer nodes" title="Direct link to Organizer nodes">​</a></h3>
<p>Organizer nodes have headlines that do no start with <code>@</code>. Organizer nodes may be inserted freely without changing the meaning of an <code>@setting</code> tree.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ignore-and-if-nodes">@ignore and @if nodes<a href="#ignore-and-if-nodes" class="hash-link" aria-label="Direct link to @ignore and @if nodes" title="Direct link to @ignore and @if nodes">​</a></h3>
<p>Leo ignores any subtree of an <code>@settings</code> tree whose headline starts with <code>@ignore</code>.</p>
<p>You can use several other kinds of nodes to cause Leo to ignore parts of an <code>@settings</code> tree:</p>
<ul>
<li>
<p><code>@ifplatform &lt;platform-name&gt;</code></p>
<p>Same as <code>@if sys.platform == &quot;platform-name&quot;</code> except that it isn&#x27;t necessary to import sys.</p>
</li>
<li>
<p><code>@ifhostname *hostA,!hostB*</code></p>
<p>Evaluates to True if and only if: <code>h=g.computeMachineName(); h==hostA and h!=hostB</code>. The <code>!</code> version allows matching to every machine name except the given one to allow differing settings on only a few machines.</p>
</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="simple-settings-nodes">Simple settings nodes<a href="#simple-settings-nodes" class="hash-link" aria-label="Direct link to Simple settings nodes" title="Direct link to Simple settings nodes">​</a></h3>
<p>Simple settings nodes have headlines of the form <code>@&lt;type&gt; name = val</code>.
These settings set the value of name to val, with the indicated type:</p>
<table><thead><tr><th style="text-align:left">&lt;type&gt;</th><th style="text-align:left">Valid values</th></tr></thead><tbody><tr><td style="text-align:left"><strong>@bool</strong></td><td style="text-align:left">True, False, 0, 1</td></tr><tr><td style="text-align:left"><strong>@directory</strong></td><td style="text-align:left">A path to a directory</td></tr><tr><td style="text-align:left"><strong>@float</strong></td><td style="text-align:left">A floating point number of the form nn.ff.</td></tr><tr><td style="text-align:left"><strong>@int</strong></td><td style="text-align:left">An integer</td></tr><tr><td style="text-align:left"><strong>@ints[list]</strong></td><td style="text-align:left">An integer (must be one of the ints in the list).<br> Example: @ints meaningOfLife[0,42,666]=42</td></tr><tr><td style="text-align:left"><strong>@path</strong></td><td style="text-align:left">A path to a directory or file</td></tr><tr><td style="text-align:left"><strong>@ratio</strong></td><td style="text-align:left">A floating point number between 0.0 and 1.0, inclusive.</td></tr><tr><td style="text-align:left"><strong>@string</strong></td><td style="text-align:left">A string</td></tr><tr><td style="text-align:left"><strong>@strings[list]</strong></td><td style="text-align:left">A string (must be one of the strings in the list).<br> Example: @strings tk_relief[&#x27;flat&#x27;,&#x27;groove&#x27;,&#x27;raised&#x27;]=&#x27;groove&#x27;</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="complex-settings-nodes">Complex settings nodes<a href="#complex-settings-nodes" class="hash-link" aria-label="Direct link to Complex settings nodes" title="Direct link to Complex settings nodes">​</a></h3>
<p>Complex settings nodes have headlines of the form <code>@&lt;type&gt; description</code>:</p>
<table><thead><tr><th style="text-align:left">@&lt;type&gt;</th><th style="text-align:left">Valid values</th></tr></thead><tbody><tr><td style="text-align:left"><strong>@buttons</strong></td><td style="text-align:left">Child @button nodes create global buttons.</td></tr><tr><td style="text-align:left"><strong>@commands</strong></td><td style="text-align:left">Child @command nodes create global buttons.</td></tr><tr><td style="text-align:left"><strong>@command-history</strong></td><td style="text-align:left">Body is a list of commands pre-loaded into history list.</td></tr><tr><td style="text-align:left"><strong>@data</strong></td><td style="text-align:left">Body is a list of strings, one per line.</td></tr><tr><td style="text-align:left"><strong>@recentfiles</strong></td><td style="text-align:left">Body is a list of file paths.</td></tr></tbody></table>
<p>Complex nodes specify settings in their body text.
See the following sections for details.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="buttons">@buttons<a href="#buttons" class="hash-link" aria-label="Direct link to @buttons" title="Direct link to @buttons">​</a></h4>
<p>An <code>@buttons</code> tree in a settings file defines global buttons that are created in the icon area of all .leo files. All <code>@button</code> nodes in the <code>@commands</code> tree create global buttons. All <code>@button</code> nodes outside the commands tree create buttons local to the settings file.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="commands">@commands<a href="#commands" class="hash-link" aria-label="Direct link to @commands" title="Direct link to @commands">​</a></h4>
<p>An <code>@commands</code> tree in a settings file defines global commands. All <code>@command</code> nodes in the <code>@commands</code> tree create global commands. All <code>@command</code> nodes outside the <code>@commands</code> tree create commands local to the settings file.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="command-history">@command-history<a href="#command-history" class="hash-link" aria-label="Direct link to @command-history" title="Direct link to @command-history">​</a></h4>
<p>The body text contains a list of commands, one per line, to be preloaded into Leo&#x27;s command history. You access command history using the up and down arrow keys in Leo&#x27;s minibuffer.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="data">@data<a href="#data" class="hash-link" aria-label="Direct link to @data" title="Direct link to @data">​</a></h4>
<p>The body text contains a list of strings, one per line. Lines starting with <code>#</code> are ignored.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rclick">@rclick<a href="#rclick" class="hash-link" aria-label="Direct link to @rclick" title="Direct link to @rclick">​</a></h4>
<p>For each <code>@button</code> node, Leo adds sub-menu items for:</p>
<ul>
<li>
<p><code>@rclick</code> nodes directly <em>following</em> the <code>@button</code>.</p>
</li>
<li>
<p><code>@rclick</code> nodes that are <em>children</em> of the <code>@button</code> node, provided that the
<code>@button</code> node has no <code>@others</code> directive.</p>
</li>
</ul>
<blockquote>
<p>💡 <strong>Standard rclick items</strong><br>
<!-- -->Leo adds two context-menu items for
each <code>@button</code> node: <code>Remove Button</code> and <code>Goto Script</code>. Leo adds an
▼ indicator <strong>only</strong> to buttons that contain right-click menu items in
addition to these two standard right-click menu items.</p>
</blockquote>
<p>The headline of the <code>@rclick</code> node gives the menu title. The body contains a
Leo script to execute when the user selects the menu item.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recentfiles">@recentfiles<a href="#recentfiles" class="hash-link" aria-label="Direct link to @recentfiles" title="Direct link to @recentfiles">​</a></h4>
<p>The body text contains a list of paths of recently opened files, one path per line. Leo writes the list of recent files to <code>.leoRecentFiles.txt</code> in Leo&#x27;s config directory, again one file per line.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="customizing-the-rst3-command">Customizing the rst3 command<a href="#customizing-the-rst3-command" class="hash-link" aria-label="Direct link to Customizing the rst3 command" title="Direct link to Customizing the rst3 command">​</a></h2>
<p>This section explains how to use <strong>user filters</strong> to alter the output of
the <code>rst3</code> command.</p>
<p><strong>Background</strong></p>
<p>The <code>rst3</code> command converts <code>@rst</code> trees containing <a href="https://docutils.sourceforge.io/rst.html" target="_blank" rel="noopener noreferrer">reStructuredText</a> (rST)
or <a href="https://www.sphinx-doc.org/en/master/" target="_blank" rel="noopener noreferrer">Sphinx</a> markup to an <strong>intermediate string</strong>. Depending on user
options, <code>rst3</code> will:</p>
<ul>
<li>write the intermediate string to an <strong>intermediate file</strong>.</li>
<li>⚠️ <strong>NOT AVAILABLE IN LEOJS:</strong> send the intermediate string to <a href="https://docutils.sourceforge.io" target="_blank" rel="noopener noreferrer">docutils</a> for conversion to HTML, PDF,
<a href="https://www.latex-project.org/" target="_blank" rel="noopener noreferrer">LaTeX</a>, etc.</li>
</ul>
<p><strong>User filters</strong></p>
<p>Plugins or scripts may define two functions: a <strong>headline filter</strong> and a
<strong>body filter</strong>:</p>
<ul>
<li>
<p><code>rst3</code> calls the body filter for all nodes except descendants of
<code>@rst-ignore</code> or <code>@rst-ignore-tree</code> nodes.</p>
</li>
<li>
<p><code>rst3</code> calls the headline filter for all nodes except:</p>
<ul>
<li>rst-no-head nodes</li>
<li>descendants of @rst-ignore or @rst-ignore-tree nodes.</li>
</ul>
</li>
<li>
<p>plugins or scripts register filters as follows:</p>
</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rstCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">register_body_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body_filter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rstCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">register_headline_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headline_filter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>The signature of all filters is <code>filter-name (c, p)</code> where c and p are
defined as usual.</li>
</ul>
<p><strong>Example filters</strong></p>
<p>Do-nothing filters would be defined like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">body_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">headline_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">h</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following filters would simulate the frequently-requested &quot;half clone&quot; feature.
That is, within any <code>@rst</code> tree, the following filters would skip the children of all clones:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> * Return True if p has a cloned parent within the @rst tree.</span><br></span><span class="token-line" style="color:#393A34"><span class="token doc-comment comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">has_cloned_parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> root </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rstCommands</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">root</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// The @rst node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">v</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">__eq__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">root</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isCloned</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">moveToParent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">body_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">has_cloned_parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">headline_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">c</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">has_cloned_parent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">h</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Both filters ignore all
descendants of clones in the <code>@rst</code> tree. We have the effect of half clones,
with no changes to Leo&#x27;s core!</p>
<blockquote>
<p>📌 <strong>NOTE</strong><br>
<code>has_cloned_parent</code> stops the scan at the <code>@rst</code> node itself, ensuring
that the <code>rst3</code> command includes &quot;top-level&quot; clones themselves.</p>
</blockquote>
<p>See <a href="https://github.com/leo-editor/leo-editor/blob/devel/leo/plugins/example_rst_filter.py" target="_blank" rel="noopener noreferrer">leo/plugins/example_rst_filter.py</a> for a complete example.</p>
<p><strong>Filters can do practically anything</strong></p>
<p>Filters can use the data in p.b, p.h, p.u, or p.gnx, but filters are not <em>limited</em> to the data in p. The has_cloned_parent filter shows that filters can access:</p>
<ul>
<li>Any ancestor or descendant of node p.</li>
<li>Any data accessible from c, that is, <em>all</em> the data in the outline, including cached data!</li>
</ul>
<p>Indeed, has_cloned_parent gets the current <code>@rst</code> node using <code>root = c.rstCommands.root</code>.</p>
<p>Moreover, filters can define special conventions, including:</p>
<ul>
<li>Special-format comments embedded in p.b,</li>
<li>Special-purpose headlines.</li>
</ul>
<p><strong>Summary</strong></p>
<p>Plugins and scripts can define headline and body filters that alter the intermediate string.</p>
<p>The <a href="https://github.com/leo-editor/leo-editor/blob/devel/leo/plugins/example_rst_filter.py" target="_blank" rel="noopener noreferrer">leo/plugins/example_rst_filter.py</a> plugin shows how to set up plugins that define custom filters.</p>
<p>Filters have easy access to all data within the outline, including:</p>
<ul>
<li><code>c.rstCommands.root</code>, the <code>@rst</code> node containing p.</li>
<li>All ancestors or descendants of p.</li>
<li>All data contained <em>anywhere</em> in the outline.</li>
</ul>
<p>The example filters shown above simulate the often-requested &quot;half clone&quot; feature.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="uas-extensible-attribues-of-nodes">uA&#x27;s: extensible attribues of nodes<a href="#uas-extensible-attribues-of-nodes" class="hash-link" aria-label="Direct link to uA&#x27;s: extensible attribues of nodes" title="Direct link to uA&#x27;s: extensible attribues of nodes">​</a></h2>
<p>Leo&#x27;s file formats, <code>.leo</code> and <code>.leojs</code>, are extensible. The basis for extending Leo files are the v.unknownAttributes ivars of vnodes, also know as <strong>user attributes</strong>, uA&#x27;s for short. Leo translates between uA&#x27;s and xml attributes in the corresponding &lt;v&gt; elements in <code>.leo</code> files.</p>
<p>For the <code>.leoJS</code> JSON file format, the uA&#x27;s are saved as JSON strings in a uA dictionary, where the keys are the vnode&#x27;s GNX.</p>
<blockquote>
<p>🚨 <strong>IMPORTANT</strong><br>
<!-- -->All members of inner dictionaries should be serializable: LeoJS uses Python&#x27;s Pickle module emulation, or JSON.stringify to encode all values in these dictionaries. It will discard any attributes that can not be pickled. This should not be a major problem to plugins. For example, instead of putting a tnode into these dictionaries, a plugin could put the tnode&#x27;s gnx (a string) in the dictionary.</p>
</blockquote>
<blockquote>
<p>📌 <strong>NOTE</strong><br>
<!-- -->Leo does <em>not</em> pickle members of inner dictionaries whose name (key) starts with str_. The values of such members should be a Python string. This convention allows strings to appear in .leo files in a more readable format.</p>
</blockquote>
<p>Here is how Leo associates uA&#x27;s with <code>&lt;v&gt;</code> elements in <code>.leo</code> files:</p>
<ul>
<li>
<p><strong>Native xml attributes</strong> are the attributes of <code>&lt;v&gt;</code> elements that are known (treated specially) by Leo&#x27;s read/write code. The native attributes of <code>&lt;v&gt;</code> elements are <code>a</code>, <code>t</code>, <code>vtag</code>, <code>tnodeList</code>, <code>marks</code>, <code>expanded</code>, and <code>descendentTnodeUnknownAttributes</code>. All other attributes of <code>&lt;v&gt;</code> and <code>&lt;t&gt;</code> elements are <strong>foreign xml attributes</strong>.</p>
</li>
<li>
<p>When reading a <code>.leo</code> file, Leo will create v.unknownAttributes ivars for any vnode whose corresponding <code>&lt;v&gt;</code> or <code>&lt;t&gt;</code> element contains a foreign xml attribute.</p>
</li>
<li>
<p>When writing a <code>.leo</code> file, Leo will write foreign xml attributes in <code>&lt;v&gt;</code> elements if the corresponding vnode contains an unknownAttributes ivar.</p>
</li>
<li>
<p>Leo performs the usual xml escapes on these strings when reading or writing the unknownAttributes ivars.</p>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/leojs/docs/users-guide/leomarkup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Leo’s Markup Language</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/leojs/docs/users-guide/commands"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Commands Reference</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-settings" class="table-of-contents__link toc-highlight">Using settings</a><ul><li><a href="#configuration-directories" class="table-of-contents__link toc-highlight">Configuration directories</a></li><li><a href="#search-order-for-settings-files" class="table-of-contents__link toc-highlight">Search order for settings files</a></li><li><a href="#safe-rules-for-local-settings" class="table-of-contents__link toc-highlight">Safe rules for local settings</a></li><li><a href="#organizer-nodes" class="table-of-contents__link toc-highlight">Organizer nodes</a></li><li><a href="#ignore-and-if-nodes" class="table-of-contents__link toc-highlight">@ignore and @if nodes</a></li><li><a href="#simple-settings-nodes" class="table-of-contents__link toc-highlight">Simple settings nodes</a></li><li><a href="#complex-settings-nodes" class="table-of-contents__link toc-highlight">Complex settings nodes</a></li></ul></li><li><a href="#customizing-the-rst3-command" class="table-of-contents__link toc-highlight">Customizing the rst3 command</a></li><li><a href="#uas-extensible-attribues-of-nodes" class="table-of-contents__link toc-highlight">uA&#39;s: extensible attribues of nodes</a></li></ul></div></div></div></div></main></div></div></div></div></div>
</body>
</html>